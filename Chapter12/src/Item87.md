# Item 87. 커스텀 직렬화 형태를 고려하라
먼저 고민해보고 괜찮다고 판단될 때만 기본 직렬화 형태를 사용해야 한다.
이상적인 직렬화 형태라면 물리적인 모습과 독립된 논리적인 모습만을 표현해야 한다.
객체의 물리적 표현과 논리적 내용이 같다면 기본 직렬화 형태라도 무방하다.

기본 직렬화 형태가 적합하다고 결정했더라도 불변식 보장과 보안을 위해 readobject 메서드를 제공해야 할 때가 많다.

## 객체의 물리적 표현과 논리적 표현의 차이가 클 때 기본 직렬화 형태를 사용해서 발생할 수 있는 네 가지 문제점
1. 공개 API가 현재의 내부 표현 방식에 영구히 묶인다. 
2. 너무 많은 공간을 차지할 수 있다. 
3. 시간이 너무 많이 걸릴 수 있다. 
4. 스택 오버플로를 일으킬 수 있다.

## StringList를 위한 합리적인 직렬화 형태
단순히 리스트가 포함한 문자열의 개수를 적음 다음, 그 뒤로 문자열들을 나열하는 정도면 된다. 
StringList의 물리적인 상세 표현은 배제한 채 논리적인 구성만 담는다. 
writeObject와 readobject가 직렬화 형태를 처리한다. 
일시적이란 뜻의 transient 한정자는 해당 인스턴스 필드가 기본 직렬화 형태에 포함되지 않는다는 표시다.

transient 한정자를 생략하려면, 객체의 논리적인 상태와 관련된 필드인지를 다시 한번 확인해야 한다.
논리적 상태에 속하는 필드만 transient를 생략해야 되기 때문이다.

객체의 전체 상태를 읽는 메서드에 적용해야 하는 동기화 메커니즘을 직렬화에도 적용해야 한다.

어떤 직렬화 형태를 택하든 직렬화 가능 클래스 모두에 직렬 버전 UID를 명시적으로 부여해야 한다. 
직렬 버전 UID 선언은 각 클래스에 아래 같은 한 줄만 추가해주면 끝이다.

'''java
private static final long serialVersionUID = <무작위로 고른 long 값>;
'''

기본 버전 클래스와의 호환성을 끊고 싶다면 단순히 직렬 버전 UID의 값을 바꿔주면 된다. 
구버전으로 직렬화된 인스턴스들과의 호환성을 끊으려는 경우를 제외하고는 직렬 버전 UID를 절대 수정하면 안 된다.