# 상속보다는 컴포지션을 사용하라

상속은 코드를 재사용하는 강력한 수단이지만, 항상 최선은 아니다. 
## 상속의 문제점
- 잘못 사용하면 오류를 내기 쉬운 소프트웨어를 만들게 된다.
- 메서드 호출과 달리 상속은 캡슐화를 깨뜨린다. </br> 이는 상위 클래스가 어떻게 구현되느냐에 따라 하위 클래스의 동작에 이상이 생길 수 있기 때문이다.

상속으로 인한 문제점은 크게 1. 메서드 재정의와 2. 새로운 메서드 추가로 인해 발생한다.
상속은 반드시 하위 클래스가 상위클래스의 '진짜' 하위 타입인 상황에서만 쓰여야 한다.
## 해결방안
### 1. 컴포지션
기존의 클래스를 확장하는 대신, 새로운 클래스를 만들고 private 필드로 기존 클래스의 인스턴스를 참조하게 하면 된다. 
기존 클래스가 새로운 클래스의 구성요소로 쓰인다는 뜻에서 이러한 설계를 컴포지션(composition; 구성)이라고 한다.
### 2. 전달
새 클래스의 인스턴스 메서드들은 전달(forwarding) 방식을 통해 private 필드로 참조하는 기존 클래스에 대응하는 메서드를 호출해 그 결과를 반환한다.
새 클래스의 메서드들을 전달 메서드(forwarding method)라고 부른다.

## 래퍼 클래스
```java
static void walk(Set<Dog> dogs) {
    InstrumentedSet<Dog> iDogs = new InstrumentedSet<>(dogs);
}
```
- 다른 Set 인스턴스를 감싸고 있다는 뜻에서 InstrumentedSet 같은 클래스를 래퍼 클래스라 하며, 다른 Set에 계측 기능을 덧씌운다는 뜻에서 데코레이터 패턴(Decorator pattern)이라고 한다.
- 래퍼 클래스는 단점이 거의 없다. 래퍼 클래스가 콜백(callback) 프레임워크와는 어울리지 않는 SELF 문제만 주의하면 된다.
